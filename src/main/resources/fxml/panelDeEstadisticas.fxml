<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane prefHeight="600" prefWidth="900"
            style="-fx-background-color: #f5f5f5;"
            xmlns="http://javafx.com/javafx/25"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="co.edu.uniquindio.controller.PanelDeEstadisticasController">

    <!-- Header -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="10"
              style="-fx-padding: 20px; -fx-background-color: white;">
            <Label style="-fx-font-size: 24px; -fx-text-fill: black; -fx-font-weight: bold;"
                   text="Estadísticas" />
        </HBox>
    </top>

    <!-- Main content -->
    <center>
        <VBox spacing="25" style="-fx-padding: 20px;">

            <!-- Métricas principales -->
            <HBox alignment="CENTER" spacing="20">

                <!-- Recursos distribuidos -->
                <VBox alignment="CENTER" spacing="10"
                      style="-fx-background-color: white; -fx-padding: 20px;
                             -fx-background-radius: 12px;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 10, 0.3, 0, 3);">
                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold;"
                           text="Recursos Distribuidos" />
                    <Label fx:id="lblRecursos" style="-fx-font-size: 28px; -fx-text-fill: #4CAF50;
                           -fx-font-weight: bold;" text="0" />
                </VBox>

                <!-- Evacuaciones completadas -->
                <VBox alignment="CENTER" spacing="10"
                      style="-fx-background-color: white; -fx-padding: 20px;
                             -fx-background-radius: 12px;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 10, 0.3, 0, 3);">
                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold;"
                           text="Evacuaciones Completadas" />
                    <Label fx:id="lblEvacuaciones" style="-fx-font-size: 28px; -fx-text-fill: #2196F3;
                           -fx-font-weight: bold;" text="0" />
                </VBox>

                <!-- Equipos activos -->
                <VBox alignment="CENTER" spacing="10"
                      style="-fx-background-color: white; -fx-padding: 20px;
                             -fx-background-radius: 12px;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 10, 0.3, 0, 3);">
                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold;"
                           text="Equipos Activos" />
                    <Label fx:id="lblEquiposActivos" style="-fx-font-size: 28px; -fx-text-fill: #FF9800;
                           -fx-font-weight: bold;" text="0" />
                </VBox>

            </HBox>

            <!-- Gráficos -->
            <HBox spacing="20">

                <!-- Gráfico de barras -->
                <VBox prefHeight="250" prefWidth="420" spacing="10"
                      style="-fx-background-color: white; -fx-padding: 15px;
                             -fx-background-radius: 12px;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.12), 10, 0.3, 0, 3);">
                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold;"
                           text="Recursos Distribuidos por Zona" />
                    <BarChart fx:id="graficoBarras" prefHeight="180" prefWidth="380">
                        <xAxis>
                            <CategoryAxis />
                        </xAxis>
                        <yAxis>
                            <NumberAxis />
                        </yAxis>
                    </BarChart>
                </VBox>

                <!-- Gráfico circular -->
                <VBox prefHeight="250" prefWidth="420" spacing="10"
                      style="-fx-background-color: white; -fx-padding: 15px;
                             -fx-background-radius: 12px;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.12), 10, 0.3, 0, 3);">
                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold;"
                           text="Porcentaje de Evacuaciones Completadas" />
                    <PieChart fx:id="graficoCircular" prefHeight="180" prefWidth="180"/>
                </VBox>

            </HBox>

            <!-- Reportes -->
            <TitledPane expanded="true" style="-fx-background-radius: 12px; -fx-padding: 5px;"
                        text="Resumen General">
                <VBox spacing="8" style="-fx-padding: 10px;">
                    <Label text="• Las zonas norte y este presentan un 80% de avance en evacuaciones." />
                    <Label text="• Los recursos más distribuidos son alimento, agua y kits médicos." />
                    <Label text="• 28 equipos siguen activos en labores de rescate." />
                    <Label text="• El flujo de rutas se mantiene estable durante las últimas 48 horas." />
                </VBox>
            </TitledPane>

            <!-- Botón volver -->
            <HBox alignment="CENTER_RIGHT">
                <Button fx:id="btnVolver"
                        onAction="#volverAtras"
                        style="-fx-background-color: #DC143C; -fx-text-fill: white;
                               -fx-font-weight: bold; -fx-background-radius: 8px;"
                        text="Volver" />
            </HBox>

        </VBox>
    </center>

</BorderPane>
